<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Weld Map Compare</title>
        <script type="text/javascript">

            const { dialog } = require('electron').remote;

            function setupClickHandlerForRunComparison(buttonID) {
                document.querySelector(buttonID).addEventListener('click', function (event) {
                    const inspectorWorkbookPath = document.querySelector('#weld-map-file-path').value;
                    const surveyWorkbookPath = document.querySelector('#survey-file-path').value;

                    const WeldMapComparator = require('./weld-map-comparator.js');
                    const wmc = new WeldMapComparator(inspectorWorkbookPath, surveyWorkbookPath);
                    wmc.process();
                });
            }
            function setupClickHandlerForFileLoad(buttonID, textPathID) {
                document.querySelector(buttonID).addEventListener('click', function (event) {
                        dialog.showOpenDialog({
                            properties: ['openFile']
                        }, function (files) {
                            if (files !== undefined) {
                                document.querySelector(textPathID).value = files[0];
                            }
                        });
                    });
            }

            document.addEventListener('DOMContentLoaded', async event => {

                window.onload = () => {
                    setupClickHandlerForFileLoad('#btn-load-weld-map-file', '#weld-map-file-path');
                    setupClickHandlerForFileLoad('#btn-load-survey-file', '#survey-file-path');
                    setupClickHandlerForRunComparison('#btn-run-comparison');
                };
            });
        </script>
    </head>
    <body>
        <div>
            <div>
                <input type="button" id="btn-load-weld-map-file" value="Load Weld Map File" style="width:300px"/>
                <input readonly type="text" id="weld-map-file-path" style="width:600px"/>
            </div>
            <div>
                <input type="button" id="btn-load-survey-file" value="Load Survey File" style="width:300px"/>
                <input readonly type="text" id="survey-file-path" style="width:600px"/>
            </div>
            <div>
                <input type="button" id="btn-run-comparison" value="Run Comparison"/>
            </div>
            <div id="outputArea" style="width:100%;height:400px;overflow:auto;border:solid 1px black">
            </div>
        </div>
    </body>
</html>
